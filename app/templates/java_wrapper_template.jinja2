// 导入必要的包
import java.util.HashMap;
import java.util.Map;
import java.util.List;
import java.util.ArrayList;
import java.util.Scanner;

{% if "import " in user_code %}
// 提取用户代码中的导入语句
{% set import_lines = [] %}
{% set code_lines = [] %}
{% for line in user_code.split('\n') %}
{% if line.strip().startswith("import ") %}
{{ line }}
{% set import_lines = import_lines + [line] %}
{% else %}
{% set code_lines = code_lines + [line] %}
{% endif %}
{% endfor %}

// 用户代码（不包含导入语句）
{{ '\n'.join(code_lines) }}
{% else %}
// 用户代码
{{ user_code }}
{% endif %}

// 如果用户代码中没有主类，添加一个主类
{% if "public class" not in user_code and "class" not in user_code %}
public class Solution {
    // 这里假设用户代码中定义了solve方法
    public Object solve(Map<String, Object> input) {
        // 默认实现，应该被用户代码覆盖
        return null;
    }
}
{% endif %}

// 添加主类，用于读取输入和执行用户代码
public class Main {
    public static void main(String[] args) {
        try {
            // 读取输入
            Scanner scanner = new Scanner(System.in);
            String inputJson = scanner.useDelimiter("\\A").next();
            scanner.close();
            
            // 解析JSON
            Object parsedInput = parseJson(inputJson);
            Map<String, Object> input;
            
            // 确保输入是Map<String, Object>类型
            if (parsedInput instanceof Map) {
                input = (Map<String, Object>) parsedInput;
            } else {
                // 如果不是Map，创建一个包含原始输入的Map
                input = new HashMap<>();
                input.put("value", parsedInput);
            }
            
            // 执行用户代码
            Solution solution = new Solution();
            Object result = solution.solve(input);
            
            // 输出结果
            System.out.println(toJsonString(result));
        } catch (Exception e) {
            System.err.println("执行错误: " + e.getMessage());
            e.printStackTrace();
            System.out.println("{\"error\": \"" + e.getMessage().replace("\"", "\\\"") + "\"}");
        }
    }
    
    // 简单的JSON解析方法
    private static Object parseJson(String json) {
        json = json.trim();
        
        // 解析null
        if (json.equals("null")) return null;
        
        // 解析布尔值
        if (json.equals("true")) return Boolean.TRUE;
        if (json.equals("false")) return Boolean.FALSE;
        
        // 解析字符串
        if (json.startsWith("\"") && json.endsWith("\"")) {
            return json.substring(1, json.length() - 1)
                    .replace("\\\"", "\"")
                    .replace("\\\\", "\\")
                    .replace("\\n", "\n")
                    .replace("\\r", "\r")
                    .replace("\\t", "\t");
        }
        
        // 解析数字
        try {
            if (json.contains(".")) {
                return Double.parseDouble(json);
            } else {
                try {
                    return Integer.parseInt(json);
                } catch (NumberFormatException e) {
                    // 可能是长整型
                    return Long.parseLong(json);
                }
            }
        } catch (NumberFormatException e) {
            // 不是数字
        }
        
        // 解析数组
        if (json.startsWith("[") && json.endsWith("]")) {
            List<Object> list = new ArrayList<>();
            String content = json.substring(1, json.length() - 1).trim();
            
            if (!content.isEmpty()) {
                int start = 0;
                int brackets = 0;
                int braces = 0;
                boolean inString = false;
                boolean escaped = false;
                
                for (int i = 0; i < content.length(); i++) {
                    char c = content.charAt(i);
                    
                    if (escaped) {
                        escaped = false;
                        continue;
                    }
                    
                    if (c == '\\') {
                        escaped = true;
                    } else if (c == '"' && !escaped) {
                        inString = !inString;
                    } else if (!inString) {
                        if (c == '[') brackets++;
                        else if (c == ']') brackets--;
                        else if (c == '{') braces++;
                        else if (c == '}') braces--;
                        else if (c == ',' && brackets == 0 && braces == 0) {
                            String element = content.substring(start, i).trim();
                            if (!element.isEmpty()) {
                                list.add(parseJson(element));
                            }
                            start = i + 1;
                        }
                    }
                }
                
                String lastElement = content.substring(start).trim();
                if (!lastElement.isEmpty()) {
                    list.add(parseJson(lastElement));
                }
            }
            
            return list;
        }
        
        // 解析对象
        if (json.startsWith("{") && json.endsWith("}")) {
            Map<String, Object> map = new HashMap<>();
            String content = json.substring(1, json.length() - 1).trim();
            
            if (!content.isEmpty()) {
                int start = 0;
                int brackets = 0;
                int braces = 0;
                boolean inString = false;
                boolean escaped = false;
                String key = null;
                
                for (int i = 0; i < content.length(); i++) {
                    char c = content.charAt(i);
                    
                    if (escaped) {
                        escaped = false;
                        continue;
                    }
                    
                    if (c == '\\') {
                        escaped = true;
                    } else if (c == '"' && !escaped) {
                        inString = !inString;
                    } else if (!inString) {
                        if (c == '[') brackets++;
                        else if (c == ']') brackets--;
                        else if (c == '{') braces++;
                        else if (c == '}') braces--;
                        else if (c == ':' && brackets == 0 && braces == 0 && key == null) {
                            key = content.substring(start, i).trim();
                            if (key.startsWith("\"") && key.endsWith("\"")) {
                                key = key.substring(1, key.length() - 1)
                                      .replace("\\\"", "\"")
                                      .replace("\\\\", "\\");
                            }
                            start = i + 1;
                        }
                        else if (c == ',' && brackets == 0 && braces == 0 && key != null) {
                            String value = content.substring(start, i).trim();
                            map.put(key, parseJson(value));
                            key = null;
                            start = i + 1;
                        }
                    }
                }
                
                if (key != null) {
                    String value = content.substring(start).trim();
                    map.put(key, parseJson(value));
                }
            }
            
            return map;
        }
        
        // 默认返回原始字符串
        return json;
    }
    
    // 将对象转换为JSON字符串
    private static String toJsonString(Object obj) {
        if (obj == null) {
            return "null";
        }
        
        if (obj instanceof String) {
            return "\"" + ((String) obj).replace("\\", "\\\\")
                                       .replace("\"", "\\\"")
                                       .replace("\n", "\\n")
                                       .replace("\r", "\\r")
                                       .replace("\t", "\\t") + "\"";
        }
        
        if (obj instanceof Number || obj instanceof Boolean) {
            return obj.toString();
        }
        
        if (obj instanceof List) {
            List<?> list = (List<?>) obj;
            StringBuilder sb = new StringBuilder("[");
            boolean first = true;
            
            for (Object item : list) {
                if (!first) {
                    sb.append(",");
                }
                sb.append(toJsonString(item));
                first = false;
            }
            
            sb.append("]");
            return sb.toString();
        }
        
        if (obj instanceof Map) {
            Map<?, ?> map = (Map<?, ?>) obj;
            StringBuilder sb = new StringBuilder("{");
            boolean first = true;
            
            for (Map.Entry<?, ?> entry : map.entrySet()) {
                if (!first) {
                    sb.append(",");
                }
                sb.append(toJsonString(entry.getKey().toString()));
                sb.append(":");
                sb.append(toJsonString(entry.getValue()));
                first = false;
            }
            
            sb.append("}");
            return sb.toString();
        }
        
        // 对于其他类型，尝试转换为Map
        Map<String, Object> map = new HashMap<>();
        try {
            for (java.lang.reflect.Field field : obj.getClass().getDeclaredFields()) {
                field.setAccessible(true);
                map.put(field.getName(), field.get(obj));
            }
            return toJsonString(map);
        } catch (Exception e) {
            return "\"" + obj.toString() + "\"";
        }
    }
} 